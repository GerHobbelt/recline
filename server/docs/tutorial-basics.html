<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Tutorial - Dataset Basics - Recline Data Explorer and Library</title>

  <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link rel="stylesheet" href="../vendor/bootstrap/2.1.1/css/bootstrap.css" />

  
    <link rel="stylesheet" href="../vendor/leaflet/0.4.4/leaflet.css">
<!--[if lte IE 8]>
<link rel="stylesheet" href="../vendor/leaflet/0.4.4/leaflet.ie.css" />
<![endif]-->
<link rel="stylesheet" href="../vendor/leaflet.markercluster/MarkerCluster.css">
<link rel="stylesheet" href="../vendor/leaflet.markercluster/MarkerCluster.Default.css">
<!--[if lte IE 8]>
<link rel="stylesheet" href="../vendor/leaflet.markercluster/MarkerCluster.Default.ie.css" />
<![endif]-->
<link rel="stylesheet" href="../vendor/slickgrid/2.0.1/slick.grid.css">
<link rel="stylesheet" href="../vendor/timeline/20120520/css/timeline.css">


  <!-- 3rd party JS libraries -->

  <script type="text/javascript" src="../vendor/underscore/1.3.3/underscore.js"></script>
  <script type="text/javascript" src="../vendor/backbone/0.9.2/backbone.js"></script>
  <script type="text/javascript" src="../vendor/mustache/0.5.0-dev/mustache.js"></script>
  <script type="text/javascript" src="../vendor/flotr2/flotr2.js"></script>
  <script type="text/javascript" src="../vendor/leaflet/0.4.4/leaflet.js"></script>
  <script type="text/javascript" src="../vendor/slickgrid/2.0.1/jquery-ui-1.8.16.custom.min.js"></script>
  <script type="text/javascript" src="../vendor/slickgrid/2.0.1/jquery.event.drag-2.0.min.js"></script>
  <script type="text/javascript" src="../vendor/slickgrid/2.0.1/slick.core.js"></script>
  <script type="text/javascript" src="../vendor/slickgrid/2.0.1/slick.editors.js"></script>
  <script type="text/javascript" src="../vendor/slickgrid/2.0.1/slick.formatters.js"></script>
  <script type="text/javascript" src="../vendor/slickgrid/2.0.1/slick.grid.js"></script>
  <script type="text/javascript" src="../vendor/moment/1.6.2/moment.js"></script>
  <script type="text/javascript" src="../vendor/timeline/20120520/js/timeline.js"></script>
  <script type="text/javascript" src="../vendor/crossfilter/1.1.0/crossfilter.min.js"></script>
  <script type="text/javascript" src="../vendor/leaflet/0.4.4/leaflet.js"></script>
  <script type="text/javascript" src="../vendor/leaflet.markercluster/leaflet.markercluster.js"></script>


<!-- NVD3 & D3 libraries -->
  <link rel="stylesheet" href="../vendor/nvd3/0.0.1/nv.d3.css">

  <script type="text/javascript" src="../vendor/d3/v2/d3.v2.min.js"></script>
  <script type="text/javascript" src="../vendor/nvd3/0.0.1/nv.d3.js"></script>
  <script type="text/javascript" src="../vendor/nvd3/0.0.1/tooltip.js"></script>
  <script type="text/javascript" src="../vendor/nvd3/0.0.1/utils.js"></script>
  <script type="text/javascript" src="../vendor/nvd3/0.0.1/models/legend.js"></script>
  <script type="text/javascript" src="../vendor/nvd3/0.0.1/models/axis.js"></script>
  <script type="text/javascript" src="../vendor/nvd3/0.0.1/models/scatter.js"></script>
  <script type="text/javascript" src="../vendor/nvd3/0.0.1/models/line.js"></script>
  <script type="text/javascript" src="../vendor/nvd3/0.0.1/models/lineChart.js"></script>


  <!--
    ## Just use the all in one library version rather than individual files

  <script type="text/javascript" src="../dist/recline.js"></script>

  -->

  <!-- model and backends -->
  <script type="text/javascript" src="../src/model.js"></script>
  <script type="text/javascript" src="../src/backend.memory.js"></script>
  <script type="text/javascript" src="../src/backend.dataproxy.js"></script>
  <script type="text/javascript" src="../src/backend.gdocs.js"></script>
  <script type="text/javascript" src="../src/backend.elasticsearch.js"></script>
  <script type="text/javascript" src="../src/backend.csv.js"></script>
  <script type="text/javascript" src="../src/backend.jsonp.js"></script>

  <!-- views -->
  <script type="text/javascript" src="../src/view.grid.js"></script>
  <script type="text/javascript" src="../src/view.slickgrid.js"></script>
  <script type="text/javascript" src="../src/view.transform.js"></script>
  <script type="text/javascript" src="../src/data.transform.js"></script>
  <script type="text/javascript" src="../src/view.graph.js"></script>
  <script type="text/javascript" src="../src/view.map.js"></script>
  <script type="text/javascript" src="../src/view.timeline.js"></script>
  <script type="text/javascript" src="../src/widget.pager.js"></script>
  <script type="text/javascript" src="../src/widget.queryeditor.js"></script>
  <script type="text/javascript" src="../src/widget.filtereditor.js"></script>
  <script type="text/javascript" src="../src/widget.fields.js"></script>
  <script type="text/javascript" src="../src/view.multiview.js"></script>
  <script type="text/javascript" src="../src/view.nvd3.graph.js"></script>
  <script type="text/javascript" src="../src/view.indicator.js"></script>
  <script type="text/javascript" src="../src/virtualmodel.js"></script>
  <script type="text/javascript" src="../src/widget.genericfilter.js"></script>





  

  <!-- link rel="stylesheet" href="vendor/bootstrap/2.0.2/css/bootstrap-responsive.css" -->

  <link href="../css/site/pygments.css" rel="stylesheet" type="text/css" />
  <link href="../css/site/site.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="logo-icon pull-left" href="/">
        <img src="http://assets.okfn.org/p/recline/img/chair.png" />
      </a>
      <a class="brand" href="../"><strong>Recline.js</strong> &ndash; relax with your data</a>
      <ul class="nav">
        <li>
          <a href="../docs/">
            <i class="icon-book icon-white"></i>
            Documentation
          </a>
        </li>
        <li class="divider-vertical"></li>
        <li>
          <a href="../docs/tutorials.html">
            <i class="icon-road icon-white"></i>
            Tutorials
          </a>
        </li>
        <li class="divider-vertical"></li>
        <li>
          <a href="../demos/">
            <i class="icon-pencil icon-white"></i>
            Demos
          </a>
        </li>
        <li class="divider-vertical"></li>
        <li>
          <a href="/download.html">
            <i class="icon-download-alt icon-white"></i>
            Download
          </a>
        </li>
      </ul>
      <ul class="nav pull-right">
        <li>
          <a href="http://github.com/okfn/recline/">
            <i class="icon-download-alt icon-white"></i>
            GitHub
          </a>
        </li>
      </ul>
    </div>
  </div>
</div>

<div class="container">
  <div class='page-header'>
  <h1>
    Getting Started with Datasets
    <br />
    <small>This step-by-step tutorial will quickly get you started withthe central Recline object: a Dataset</small>
  </h1>
</div>
<h2 id='preparations'>Preparations</h2>

<ol>
<li>
<p><a href='../download.html'>Download ReclineJS</a> and relevant dependencies.</p>
</li>

<li>
<p>Include the core dependencies for the Dataset model</p>
</li>
</ol>

<h2 id='creating_a_dataset'>Creating a Dataset</h2>

<p>Here&#8217;s the example data We are going to work with:</p>

<p>In this data we have 6 records / rows. Each record is a javascript object containing keys and values (values can be &#8216;simple&#8217; e.g. a string or float or arrays or hashes - e.g. the geo value here).</p>
<div class='alert alert-info'>In this tutorial we are creating datasets with
"local" JS data. However, Recline has a variety of Backends that make it easy
to create Datasets from a variety of online sources and local sources including
Google Spreadsheets, CSV files, etc. See the <a href='tutorial-backends.html'>Backend tutorial</a> for more.</div>
<p>We can now create a recline Dataset object from this raw data:</p>
<script type='text/javascript'>
var data = [
  {id: 0, date: '2011-01-01', x: 1, y: 2, z: 3, country: 'DE', geo: {lat:52.56, lon:13.40} },
  {id: 1, date: '2011-02-02', x: 2, y: 4, z: 24, country: 'UK', geo: {lat:54.97, lon:-1.60}},
  {id: 2, date: '2011-03-03', x: 3, y: 6, z: 9, country: 'US', geo: {lat:40.00, lon:-75.5}},
  {id: 3, date: '2011-04-04', x: 4, y: 8, z: 6, country: 'UK', geo: {lat:57.27, lon:-6.20}},
  {id: 4, date: '2011-05-04', x: 5, y: 10, z: 15, country: 'UK', geo: {lat:51.58, lon:0}},
  {id: 5, date: '2011-06-02', x: 6, y: 12, z: 18, country: 'DE', geo: {lat:51.04, lon:7.9}}
];


var dataset = new recline.Model.Dataset({
  records: data
});
</script>
<h2 id='a_dataset_and_its_records'>A Dataset and its Records</h2>

<p>Now that we have created a Dataset, we can use it.</p>

<p>For example, let&#8217;s display some information about the Dataset and its records using some of the key Dataset attributes: <code>recordCount</code> and <code>records</code>.</p>

<p>Here&#8217;s the output:</p>
<div class='ex-1 well'>&nbsp;</div><script type='text/javascript'> 
$('.ex-1').html('');
// (for convenience) assume availability of jquery
// must have div with class="ex-1"
var $el = $('.ex-1');

// total number of records resulting from latest query
$el.append('Total found: ' + dataset.recordCount + '<br />');
$el.append('Total returned: ' + dataset.records.length);

$el.append('<hr />');

// get 2nd record in list (note collection indexes off 0!)
// this is an instance of a Record object
var record = dataset.records.at(1);

// if records have an id you can get by id too ...
// var record = dataset.records.get(record-id);

// To get record attribute we use 'get'
var recdate = record.get('date');

$el.append('Date is: ' + recdate);
$el.append('<hr />');

// We can also convert the Record back to simple JS object
var simple = record.toJSON();

$el.append('<h4>Record as simple object</h4>');
$el.append('<pre>' + JSON.stringify(simple, null, 2) + '</pre>');


</script>
<h3 id='records'>Records</h3>

<p><code>Dataset.records</code> is a Backbone Collection of <code>Record</code>s resutling from latest query. This need not (and usually isn&#8217;t) <strong>all</strong> the records in this Dataset since the latest query need not have matched all records.</p>
<div class='alert alert-info'>
Note that on initialization, a Dataset automatically queries for the first 100 records so this is what will usually be available in th <code>records</code> attribute. If you did want all records loaded into <code>records</code> at the start just requery after fetch has completed:




</div>
<p>As a Backbone Collection it supports all the standard Backbone collection functionality including methods like <code>each</code> and <code>filter</code>:</p>
<div class='alert alert-info'>Want to know more about Dataset and Records? Check out the <a href='models.html'>reference documentation</a></div>
<h2 id='fields'>Fields</h2>

<p>In addition to Records, a Dataset has <a href='models.html#field'>Fields</a> stored in the <code>fields</code> attribute. Fields provide information about the fields/columns in the Dataset, for example their id (key name in record), label, type etc.</p>

<p>The Dataset&#8217;s fields will be automatically computed from records or provided by the backend but they can also be explicitly provided and configured. Let&#8217;s take a look at the fields on the dataset at present using the following code:</p>

<p>Running this results in the following:</p>
<div class='ex-fields well'>&nbsp;</div><script type='text/javascript'> 
$('.ex-fields').html('');
var $el = $('.ex-fields');

// Now list the Fields of this Dataset (these will have be automatically extracted from the data)
$el.append('Fields: ');
// Dataset.fields is a Backbone collection of Fields (i.e. record attributes)
dataset.fields.each(function(field) {
  $el.append(field.id + ' || ');
});

$el.append('<hr />');

// Show all field info
var json = dataset.fields.toJSON();
$el.append(
  $('<pre />')
    .append(
      JSON.stringify(json, null, 2)
    )
);


</script>
<p>As can be seen all fields have the default type of &#8216;string&#8217;.</p>

<p>As you may have noticed above the last geo attribute of the dataset just rendered as <code>[object Object]</code>. This is because the Dataset is treating that field value as a string. Let&#8217;s now take a look at the Dataset fields in more detail.</p>

<p>Let&#8217;s change the geo field to have type geo_point and see what affect that has on displaying of the dataset (for good measure we&#8217;ll also set the label):</p>
<div class='ex-fields-2 well'>&nbsp;</div><script type='text/javascript'> 
$('.ex-fields-2').html('');
var $el = $('.ex-fields-2');

dataset.fields.models[6] = new recline.Model.Field({
  id: 'geo',
  label: 'Location',
  type: 'geo_point'
});
var rec = dataset.records.at(0);
$el.append(record.summary());


</script>
<p>As can be seen the rendering of the field has changed. This is because the <code>summary</code> method uses the Record.getFieldValue function which in turn renders a record field using the Field&#8217;s renderer function. This function varies depending on the type and can also be customized (see the <a href='models.html#field'>Field documentation</a>).</p>
</div>



<section class="footer">
	<div class="container">
    <div class="row">
      <div class="span4">
        <p class="getit-btn"><a href="../docs/" class="btn">Use the Library &raquo;</a></p>
        <p>Recline.js is freely redistributable under the terms of the MIT license.</p>
      </div>
      <div class="span3">
        <p><a href="http://www.shuttleworthfoundation.org/"><img src="http://farm8.staticflickr.com/7019/6467412887_18f72f5066_n.jpg" style="width: 140px;" alt="Supported by funding from the Shuttleworth Foundation" /></a></p>
        <ul>
          <li><a href="http://datahub.io/">The DataHub</a></li>
          <li><a href="http://OpenSpending.org/">OpenSpending.org</a></li>
          <li><a href="http://datacouch.com/">DataCouch.com</a></li>
        </ul>
      </div>
      <div class="span3">
        <ul>
          <li><a href="http://okfnlabs.org/">Open Knowledge Foundation Labs</a></li>
          <li><a href="http://opendefinition.org/">Open Definition</a></li>
          <li><a href="http://okfn.org/">Open Knowledge Foundation</a></li>
        </ul>
      </div>
      <div class="span2">
        <h5>Contacts</h5>
        <ul style="list-style-type: none; margin-left: 0;">
          <li><a href="http://twitter.com/ReclineJS">@ReclineJS</a></li>
          <li><a href="http://twitter.com/maxogden">@maxogden</a></li>
          <li><a href="http://twitter.com/rufuspollock">@rufuspollock</a></li>
        </ul>
        <a class="nav-logo" href="http://okfn.org/" title="An Open Knowledge Foundation Project">
          <img src="http://assets.okfn.org/p/okfn/img/logo_28x30.png" alt="Open Knowledge Foundation logo" />
        </a>
      </div>
    </div>
  </div>
</section>

</body>
</html>
