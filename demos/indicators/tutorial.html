---
layout: moviri
title: Demos - NVD3 Integration
recline-deps: true
root: ../../
---


<body>

<div class="container-fluid">


    <div class="row-fluid"><div class="span4"></div></div>
    <div class="row-fluid">
        <div class="span5"><div id="grid1" style="height: 1000px;"></div><div id="grid2" style="height: 1000px;"></div></div>
        <div class="span6"><div id="map1"></div></div>
    </div>







</div>

<script type="text/javascript" src="/demos/maps/datasource.js"></script>
<script>



var colorSchema = new recline.Data.ColorSchema({
    type: "scaleWithDataMinMax",
    colors: ['#F7E1C5', '#6A000B']
});

colorSchema.setDataset(dataset, "value");

vdataset = new recline.Model.VirtualDataset({
    dataset:dataset,
    aggregation:{
        dimensions:["state"],
        aggregatedFields:["value"],
        aggregationFunctions:["sum", "ratioToReport"]
    },
    totals: {
        aggregationFunctions:   ["sum"],
        aggregatedFields:       ["value_sum"]
    }
});

var action1 = new recline.Action({
    filters: {
        filter_state_term: {type: "term", field: "state", fieldType: "string"}

    },
    models: [
        {model: dataset, filters:["filter_state_term"]}
    ],
    type: ["selection"]
});

var $el = $('#grid1');
var grid1 = new recline.View.SlickGrid({
    model: vdataset,
    el: $el,
    state: {  fitColumns:true,
        useHoverStyle: true,
        useStripedStyle: true,
        useCondensedStyle: true
    },
    actions: [{
        action: action1,
        mapping: [
            {srcField: "state", filter: "filter_state_term"}
        ],
        event: ["selection"]
    }]

});
grid1.visible = true;
grid1.render();


var $el = $('#grid2');
var grid2 = new recline.View.SlickGrid({
    model: vdataset,
    resultType: "totals",
    el: $el,
    state: {  fitColumns:true,
        useHoverStyle: true,
        useStripedStyle: true,
        useCondensedStyle: true
    }

});
grid2.visible = true;
grid2.render();


drawGraph();


dataset.fetch();


function drawGraph() {



}


</script>

</body>

